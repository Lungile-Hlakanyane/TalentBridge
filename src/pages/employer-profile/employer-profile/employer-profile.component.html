<div class="action-back-container">
  <span class="back-text" (click)="goBack()">
    <i class="fas fa-arrow-left"></i> Back
  </span>
</div>

<div class="employer-profile-container">
  <!-- Header -->
  <div class="profile-header">
    <div class="profile-avatar">
      <img src="../../../assets/avatar_employer.png" alt="Employer Avatar" />
    </div>
    <div class="profile-info">
      <h2>{{employerData.surname}} {{ employerData.name }}</h2>
      <p class="email">{{ employerData.email }}</p>
      <p class="role">Employer</p>
    </div>
    <div class="edit-btn-section">
      <button class="edit-btn" (click)="editProfile()">Edit Profile</button>
    </div>
  </div>

  <!-- Employer Info -->
  <div class="profile-section">
    <h3>Personal Information</h3>
    <div class="info-grid">
      <div class="info-item">
        <label>Full Name</label>
        <p>{{employerData.surname}} {{ employerData.name }} </p>
      </div>
      <div class="info-item">
        <label>Email</label>
        <p>{{ employerData.email }}</p>
      </div>
      <div class="info-item">
        <label>Contact Number</label>
        <p>{{ employerData.phone }}</p>
      </div>
      <div class="info-item">
        <label>Role</label>
        <p>{{ employerData.role }}</p>
      </div>
    </div>
  </div>

  <!-- Company Info -->
  <div class="profile-section">
    <h3>Company Information</h3>
    <div class="info-grid">
      <div class="info-item">
        <label>Company Name</label>
        <p>{{ employerData.companyName }}</p>
      </div>
      <div class="info-item">
        <label>Company Description</label>
        <p>{{ employerData.companyDescription }}</p>
      </div>
      <div class="info-item">
        <label>Tax Number</label>
        <p>{{ employerData.taxNumber }}</p>
      </div>
      <div class="info-item">
        <label>Registered Address</label>
        <p>{{ employerData.registeredAddress }}</p>
      </div>
      <div class="info-item">
        <label>Lease Agreement</label>
        <p>{{ employerData.leaseAgreement ? 'Uploaded' : 'Not Available' }}</p>
      </div>
    </div>

    <div class="edit-btn-section" style="padding-top:15px;">
     <button class="edit-company-btn" (click)="openCompanyModal()">Add Company Information</button>
    </div>

  </div>

  <!-- Company Documents -->
  <div class="profile-section">
    <h3>Uploaded Documents</h3>
    <div class="documents-list">
      <div class="document-card" *ngFor="let doc of employerData.documents">
        <i class="fa fa-file-text doc-icon"></i>
        <span>{{ doc.name }}</span>
      </div>
    </div>
  </div>
</div>

<!-- Edit Modal -->
<div class="modal-backdrop edit-modal" *ngIf="showEditModal">
  <div class="modal-content">
    <h2>Edit Employer Profile</h2>

    <form (ngSubmit)="saveChanges()" #editForm="ngForm">
      <!-- Personal Info -->

       <div class="form-group">
        <label>Name</label>
        <input type="text" [(ngModel)]="editData.surname" name="fullName" required />
      </div>

      <div class="form-group">
        <label>Surname</label>
        <input type="text" [(ngModel)]="editData.name" name="fullName" required />
      </div>

      <div class="form-group">
        <label>Email</label>
        <input type="email" [(ngModel)]="editData.email" name="email" required />
      </div>

      <div class="form-group">
        <label>Contact Number</label>
        <input type="text" [(ngModel)]="editData.phone" name="contactNumber" />
      </div>

      <!-- Company Info -->
      <div class="form-group">
        <label>Company Name</label>
        <input type="text" [(ngModel)]="editData.companyName" name="companyName" />
      </div>

      <div class="form-group">
        <label>Company Description</label>
        <textarea [(ngModel)]="editData.companyDescription" name="companyDescription"></textarea>
      </div>

      <!-- Company Info -->
      <div class="form-group">
        <label>Tax Number</label>
        <input type="text" [(ngModel)]="editData.taxNumber" name="taxNumber" />
      </div>

      <!-- Company Info -->
      <div class="form-group">
        <label>Registered Address</label>
        <input type="text" [(ngModel)]="editData.registeredAddress" name="registeredAddress" />
      </div>

      <!-- ðŸ“‚ Company Documents -->
      <div class="documents-section">
        <h3>Company Documents</h3>


        <div class="form-group">
          <label>Registration Document</label>
          <input type="file" (change)="onFileSelected($event, 'registrationDocument')" />
          <p class="file-status" *ngIf="editData.registrationDocument">
            {{ editData.registrationDocument.name }}
          </p>
        </div>

        <div class="form-group">
          <label>Tax Clearance Certificate</label>
          <input type="file" (change)="onFileSelected($event, 'taxClearanceCertificate')" />
          <p class="file-status" *ngIf="editData.taxClearanceCertificate">
            {{ editData.taxClearanceCertificate.name }}
          </p>
        </div>

        <div class="form-group">
          <label>Lease Agreement</label>
          <input type="file" (change)="onFileSelected($event, 'leaseAgreement')" />
          <p class="file-status" *ngIf="editData.leaseAgreement">
            {{ editData.leaseAgreement.name }}
          </p>
        </div>
      </div>

      <!-- Actions -->
      <div class="modal-actions">
        <button type="button" class="cancel-btn" (click)="closeModal()">Cancel</button>
        <button type="submit" class="save-btn">Save Changes</button>
      </div>
    </form>
  </div>

  <!-- âœ… Company Info Modal -->
<div class="modal-backdrop company-modal" *ngIf="showCompanyModal">
  <div class="modal-content company-modal">
    <h2>Add Company Information</h2>
    <form (ngSubmit)="saveCompanyInfo()" #companyForm="ngForm">
      <div class="form-group">
        <label>Company Description</label>
        <textarea [(ngModel)]="companyInfo.description" name="description" required></textarea>
      </div>

      <div class="form-group">
        <label>Tax Number</label>
        <input type="text" [(ngModel)]="companyInfo.taxNumber" name="taxNumber" required />
      </div>

      <div class="form-group">
        <label>Registered Address</label>
        <input type="text" [(ngModel)]="companyInfo.registeredAddress" name="registeredAddress" required />
      </div>

      <div class="form-group">
        <label>Registration Document</label>
        <input type="file" (change)="onFileSelected($event, 'registrationDocument')" />
        <p *ngIf="companyInfo.registrationDocument">{{ companyInfo.registrationDocument.name }}</p>
      </div>

      <div class="form-group">
        <label>Tax Clearance Document</label>
        <input type="file" (change)="onFileSelected($event, 'taxClearanceDocument')" />
        <p *ngIf="companyInfo.taxClearanceDocument">{{ companyInfo.taxClearanceDocument.name }}</p>
      </div>

      <div class="form-group">
        <label>Lease Agreement</label>
        <input type="file" (change)="onFileSelected($event, 'leaseAgreement')" />
        <p *ngIf="companyInfo.leaseAgreement">{{ companyInfo.leaseAgreement.name }}</p>
      </div>

      <div class="modal-actions">
        <button type="button" class="cancel-btn" (click)="closeCompanyModal()">Cancel</button>
        <button type="submit" class="save-btn">Save</button>
      </div>
    </form>
  </div>


</div>

