<div class="action-back-container">
  <span class="back-text" (click)="goBack()">
    <i class="fas fa-arrow-left"></i> Back
  </span>
</div>

<div class="employer-profile-container">
  <!-- Header -->
  <div class="profile-header">
    <div class="profile-avatar">
      <img src="../../../assets/avatar_employer.png" alt="Employer Avatar" />
    </div>
    <div class="profile-info">
      <h2>{{employerData.surname}} {{ employerData.name }}</h2>
      <p class="email">{{ employerData.email }}</p>
      <p class="role">{{employerData.role}}</p>
      <p>{{ employerData.companyName }}</p>
    </div>
    <div class="edit-btn-section">
      <button class="edit-btn" (click)="editProfile()">Edit Profile</button>
    </div>
  </div>

  <!-- Employer Info -->
  <div class="profile-section">
    <h3>Personal Information</h3>
    <div class="info-grid">
      <div class="info-item">
        <label>Full Name</label>
        <p>{{employerData.surname}} {{ employerData.name }} </p>
      </div>
      <div class="info-item">
        <label>Email</label>
        <p>{{ employerData.email }}</p>
      </div>
      <div class="info-item">
        <label>Contact Number</label>
        <p>{{ employerData.phone }}</p>
      </div>
      <div class="info-item">
        <label>Role</label>
        <p>{{ employerData.role }}</p>
      </div>
    </div>
  </div>

<!-- Employee Info -->
<div class="profile-section" *ngIf="employerData?.role === 'EMPLOYEE'">
  <h3>Uploaded Documents</h3>
  <div class="info-grid">
    <div class="info-item resume-item">
      <label>Resume/CV</label>
      <p>{{ getResumeFileName(employerData?.resume_path) }}</p>
      <img src="../../../assets/download_icon.svg" alt="Download Resume" class="download-icon"(click)="downloadResume(employerData?.id)"/>
    </div>
  </div>
</div>


  <!-- Company Info -->
<div class="profile-section" *ngIf="companyData">
  <h3>Company Information</h3>
  <div class="info-grid">
    <div class="info-item">
      <label>Company Description</label>
      <p>{{ companyData.companyDescription }}</p>
    </div>
    <div class="info-item">
      <label>Tax Number</label>
      <p>{{ companyData.taxNumber }}</p>
    </div>
    <div class="info-item">
      <label>Registered Address</label>
      <p>{{ companyData.registeredAddress }}</p>
    </div>
    <div class="info-item">
      <label>Registration Document</label>
      <p>{{ companyData.registrationDocument ? 'Uploaded' : 'Not Available' }}</p>
    </div>
    <div class="info-item">
      <label>Tax Clearance Document</label>
      <p>{{ companyData.taxClearanceDocument ? 'Uploaded' : 'Not Available' }}</p>
    </div>
    <div class="info-item">
      <label>Lease Agreement</label>
      <p>{{ companyData.leaseAgreement ? 'Uploaded' : 'Not Available' }}</p>
    </div>
  </div>
</div>


  <!-- Company Documents -->
<div class="profile-section" *ngIf="companyData">
  <h3>Uploaded Documents</h3>
  <div class="documents-list">
    <div class="document-card" *ngFor="let doc of getCompanyDocuments()">
      <!-- File Icon -->
      <i class="fa fa-file-text doc-icon"></i>

      <!-- Document Name -->
      <span>{{ doc.name }}</span>

      <!-- Download Icon using image -->
      <img style="color:blue; cursor:pointer;"
        src="../../../assets/download_icon.svg"
        class="download-icon"
        (click)="downloadFile(doc.file, doc.name + '.pdf')"
      />
    </div>
  </div>
</div>


</div>

<!-- Edit Modal -->
<div class="modal-backdrop edit-modal" *ngIf="showEditModal">
  <div class="modal-content">
    <h2>Edit Employer Profile</h2>

    <form (ngSubmit)="saveChanges()" #editForm="ngForm">
      <!-- Personal Info -->

       <div class="form-group">
        <label>Name</label>
        <input type="text" [(ngModel)]="editData.surname" name="fullName" required />
      </div>

      <div class="form-group">
        <label>Surname</label>
        <input type="text" [(ngModel)]="editData.name" name="fullName" required />
      </div>

      <div class="form-group">
        <label>Email</label>
        <input type="email" [(ngModel)]="editData.email" name="email" required />
      </div>

      <div class="form-group">
        <label>Contact Number</label>
        <input type="text" [(ngModel)]="editData.phone" name="contactNumber" />
      </div>

      <!-- Company Info -->
      <div class="form-group">
        <label>Company Name</label>
        <input type="text" [(ngModel)]="editData.companyName" name="companyName" />
      </div>

      
      <!-- Actions -->
      <div class="modal-actions">
        <button type="button" class="cancel-btn" (click)="closeModal()">Cancel</button>
        <button type="submit" class="save-btn">Save Changes</button>
      </div>
    </form>
  </div>

</div>

